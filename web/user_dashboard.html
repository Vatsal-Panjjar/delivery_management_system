<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">
    <h2>Your Orders</h2>
    <button onclick="logout()">Log Out</button>
    <table id="ordersTable">
        <thead>
            <tr>
                <th>Order ID</th>
                <th>Item</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<script>
const token = localStorage.getItem('token');
if(!token) window.location.href = 'login.html';

async function fetchOrders() {
    const res = await fetch('/orders', {
        headers: { 'Authorization': 'Bearer ' + token }
    });
    if(res.ok) {
        const orders = await res.json();
        const tbody = document.querySelector('#ordersTable tbody');
        tbody.innerHTML = '';
        orders.forEach(o => {
            const row = `<tr><td>${o.id}</td><td>${o.item}</td><td>${o.status}</td></tr>`;
            tbody.innerHTML += row;
        });
    }
}

function logout() {
    localStorage.removeItem('token');
    window.location.href = 'login.html';
}

fetchOrders();
</script>
</body>
</html>
