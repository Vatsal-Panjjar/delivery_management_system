<!doctype html>
<html>
<head><meta charset="utf-8"><title>Login</title><link rel="stylesheet" href="/css/style.css"></head>
<body>
  <div class="card">
    <h2>Login</h2>
    <form id="login">
      <input name="email" placeholder="email" required>
      <input name="password" type="password" placeholder="password" required>
      <button>Login</button>
    </form>
    <div id="msg"></div>
  </div>
<script>
document.getElementById('login').addEventListener('submit', async e=>{
  e.preventDefault();
  const {email,password} = Object.fromEntries(new FormData(e.target).entries());
  const res = await fetch('/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});
  if(res.ok){ const d = await res.json(); localStorage.setItem('token', d.token); localStorage.setItem('role', d.role); location.href = '/dashboard.html'; }
  else document.getElementById('msg').innerText = await res.text();
});
</script>
</html>
