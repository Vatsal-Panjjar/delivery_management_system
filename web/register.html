<!doctype html>
<html>
<head><meta charset="utf-8"><title>Register</title><link rel="stylesheet" href="/css/style.css"></head>
<body>
  <div class="card">
    <h2>Register</h2>
    <form id="reg">
      <input name="username" placeholder="username" required>
      <input name="email" placeholder="email" required>
      <input name="password" type="password" placeholder="password" required>
      <button>Create</button>
    </form>
    <div id="msg"></div>
  </div>
<script>
document.getElementById('reg').addEventListener('submit', async e=>{
  e.preventDefault();
  const data = Object.fromEntries(new FormData(e.target).entries());
  const res = await fetch('/api/auth/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});
  document.getElementById('msg').innerText = res.ok ? 'Registered' : await res.text();
});
</script>
</html>
