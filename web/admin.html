<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">
    <h2>Admin Dashboard</h2>
    <table id="ordersTable">
        <thead>
            <tr>
                <th>Order ID</th>
                <th>User</th>
                <th>Item</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<script>
async function fetchOrders() {
    const res = await fetch('/admin/orders');
    if(res.ok) {
        const orders = await res.json();
        const tbody = document.querySelector('#ordersTable tbody');
        tbody.innerHTML = '';
        orders.forEach(o => {
            const row = `<tr>
                <td>${o.id}</td>
                <td>${o.user}</td>
                <td>${o.item}</td>
                <td>${o.status}</td>
                <td>
                    <button onclick="updateStatus(${o.id}, 'delivered')">Mark Delivered</button>
                    <button onclick="updateStatus(${o.id}, 'cancelled')">Cancel</button>
                </td>
            </tr>`;
            tbody.innerHTML += row;
        });
    }
}

async function updateStatus(id, status) {
    const res = await fetch('/admin/orders/' + id, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ status })
    });
    if(res.ok) fetchOrders();
}

fetchOrders();
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">
    <h2>Admin Dashboard</h2>
    <table id="ordersTable">
        <thead>
            <tr>
                <th>Order ID</th>
                <th>User</th>
                <th>Item</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<script>
async function fetchOrders() {
    const res = await fetch('/admin/orders');
    if(res.ok) {
        const orders = await res.json();
        const tbody = document.querySelector('#ordersTable tbody');
        tbody.innerHTML = '';
        orders.forEach(o => {
            const row = `<tr>
                <td>${o.id}</td>
                <td>${o.user}</td>
                <td>${o.item}</td>
                <td>${o.status}</td>
                <td>
                    <button onclick="updateStatus(${o.id}, 'delivered')">Mark Delivered</button>
                    <button onclick="updateStatus(${o.id}, 'cancelled')">Cancel</button>
                </td>
            </tr>`;
            tbody.innerHTML += row;
        });
    }
}

async function updateStatus(id, status) {
    const res = await fetch('/admin/orders/' + id, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ status })
    });
    if(res.ok) fetchOrders();
}

fetchOrders();
</script>
</body>
</html>
